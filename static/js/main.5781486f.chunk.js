(this["webpackJsonpreact-auth-template"]=this["webpackJsonpreact-auth-template"]||[]).push([[0],{124:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a(36),s=a.n(n),c=(a(93),a(49)),i=a(5),o=a(8),l=a(129),u=(a(94),a(127)),j=a(1);var d=function(e){var t=e.variant,a=e.heading,n=e.message,s=Object(r.useState)(!0),c=Object(i.a)(s,2),o=c[0],l=c[1],d=Object(r.useState)(null),b=Object(i.a)(d,2),h=b[0],m=b[1];return Object(r.useEffect)((function(){var e=setTimeout((function(){return l(!1)}),5e3);return m(e),function(){clearTimeout(h)}}),[]),Object(j.jsx)(u.a,{variant:t,onClose:function(){return l(!1)},dismissible:!0,show:o,children:Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)(u.a.Heading,{children:a}),Object(j.jsx)("p",{className:"alert-body",children:n})]})})},b=a(86),h=a(56),m=a(10),O=function(e){var t=e.user;return t.profile?Object(j.jsxs)(r.Fragment,{children:[Object(j.jsx)(m.c,{to:"/change-password",className:"nav-link",children:"Change Password"}),Object(j.jsx)(m.c,{to:"/sign-out",className:"nav-link",children:"Sign Out"}),Object(j.jsx)(m.c,{to:"/chat",className:"nav-link",children:"ChatRoom"}),Object(j.jsx)(m.c,{to:"profiles/".concat(t.profile._id),className:"nav-link",children:"My Profile"})]}):Object(j.jsxs)(r.Fragment,{children:[Object(j.jsx)(m.c,{to:"/change-password",className:"nav-link",children:"Change Password"}),Object(j.jsx)(m.c,{to:"/sign-out",className:"nav-link",children:"Sign Out"}),Object(j.jsx)(m.c,{to:"/profiles/create",className:"nav-link",children:"Create Profile"})]})},p=Object(j.jsxs)(r.Fragment,{children:[Object(j.jsx)(m.c,{to:"/sign-up",className:"nav-link",children:"Sign Up"}),Object(j.jsx)(m.c,{to:"/sign-in",className:"nav-link",children:"Sign In"})]}),x=Object(j.jsx)(r.Fragment,{children:Object(j.jsx)(m.c,{to:"/",className:"nav-link",children:"Home"})}),g=function(e){var t=e.user;return Object(j.jsxs)(h.a,{bg:"primary",variant:"dark",expand:"md",children:[Object(j.jsx)(h.a.Brand,{children:Object(j.jsx)(m.b,{to:"/",style:{color:"#FFF",textDecoration:"none"},children:"SocketToMe"})}),Object(j.jsx)(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(j.jsx)(h.a.Collapse,{id:"basic-navbar-nav",children:Object(j.jsxs)(b.a,{className:"ml-auto",children:[t&&Object(j.jsxs)("span",{className:"navbar-text mr-2",children:["Welcome, ",t.email]}),x,t?O({user:t}):p]})})]})},f=a(20),v=a(13),w=a.n(v),y="https://thawing-meadow-43090.herokuapp.com",S="http://localhost:4741",k="localhost"===window.location.hostname?S:y,C=a(38),N=a.n(C),P=function(e,t,a){return N()({method:"POST",url:k+"/sign-up/",data:{credentials:{email:e,password:t,password_confirmation:a}}})},A=function(e,t){return N()({url:k+"/sign-in/",method:"POST",data:{credentials:{email:e,password:t}}})},F=function(e){return N()({url:k+"/sign-out/",method:"DELETE",headers:{Authorization:"Bearer ".concat(e.token)}})},E=function(e,t,a){return N()({url:k+"/change-password/",method:"PATCH",headers:{Authorization:"Bearer ".concat(a.token)},data:{passwords:{old:e,new:t}}})},I=a(6),G=a(18),L=function(e){var t=e.setUser,a=e.msgAlert,n=Object(r.useState)(""),s=Object(i.a)(n,2),c=s[0],l=s[1],u=Object(r.useState)(""),d=Object(i.a)(u,2),b=d[0],h=d[1],m=Object(r.useState)(""),O=Object(i.a)(m,2),p=O[0],x=O[1],g=Object(r.useState)(!1),v=Object(i.a)(g,2),y=v[0],S=v[1],k=function(){var e=Object(f.a)(w.a.mark((function e(r){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,e.next=4,P(c,b,p);case 4:return e.next=6,A(c,b);case 6:n=e.sent,t(n.data.user),a({heading:"Sign Up Success",message:"Succesfully registered! You've been signed in as well.",variant:"success"}),S(!0),e.next=19;break;case 12:e.prev=12,e.t0=e.catch(1),a({heading:"Sign Up Failed with error: "+e.t0.message,message:"Registration failed. Email may be taken, or passwords don't match.",variant:"danger"}),console.error(e.t0),l(""),h(""),x("");case 19:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return y?Object(j.jsx)(o.a,{to:"/"}):Object(j.jsx)("div",{className:"row",children:Object(j.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(j.jsx)("h3",{children:"Sign Up"}),Object(j.jsxs)(I.a,{onSubmit:k,children:[Object(j.jsxs)(I.a.Group,{className:"mb-3",controlId:"email",children:[Object(j.jsx)(I.a.Label,{children:"Email address"}),Object(j.jsx)(I.a.Control,{type:"email",placeholder:"Enter email",required:!0,value:c,onChange:function(e){return l(e.target.value)}})]}),Object(j.jsxs)(I.a.Group,{className:"mb-3",controlId:"password",children:[Object(j.jsx)(I.a.Label,{children:"Password"}),Object(j.jsx)(I.a.Control,{required:!0,value:b,type:"password",placeholder:"Password",onChange:function(e){return h(e.target.value)}})]}),Object(j.jsxs)(I.a.Group,{className:"mb-3",controlId:"passwordConfirmation",children:[Object(j.jsx)(I.a.Label,{children:"Password Confirmation"}),Object(j.jsx)(I.a.Control,{required:!0,value:p,type:"password",placeholder:"Confirm Password",onChange:function(e){return x(e.target.value)}})]}),Object(j.jsx)(G.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})},U=function(e){var t=e.setUser,a=e.msgAlert,n=Object(r.useState)(""),s=Object(i.a)(n,2),c=s[0],l=s[1],u=Object(r.useState)(""),d=Object(i.a)(u,2),b=d[0],h=d[1],m=Object(r.useState)(!1),O=Object(i.a)(m,2),p=O[0],x=O[1],g=function(){var e=Object(f.a)(w.a.mark((function e(r){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,e.next=4,A(c,b);case 4:n=e.sent,t(n.data.user),console.log(n.data.user),a({heading:"Sign In Success!",message:"Welcome!",variant:"success"}),x(!0),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(1),a({heading:"Sign In Failed with error: "+e.t0.message,message:"Failed to sign in. Check your email and password and try again.",variant:"danger"}),console.error(e.t0),l(""),h("");case 17:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return p?Object(j.jsx)(o.a,{to:"/"}):Object(j.jsx)("div",{className:"row",children:Object(j.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(j.jsx)("h3",{children:"Sign In"}),Object(j.jsxs)(I.a,{onSubmit:g,children:[Object(j.jsxs)(I.a.Group,{className:"mb-3",controlId:"email",children:[Object(j.jsx)(I.a.Label,{children:"Email address"}),Object(j.jsx)(I.a.Control,{type:"email",placeholder:"Enter email",required:!0,value:c,onChange:function(e){return l(e.target.value)}})]}),Object(j.jsxs)(I.a.Group,{className:"mb-3",controlId:"password",children:[Object(j.jsx)(I.a.Label,{children:"Password"}),Object(j.jsx)(I.a.Control,{required:!0,value:b,type:"password",placeholder:"Password",onChange:function(e){return h(e.target.value)}})]}),Object(j.jsx)(G.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})},q=function(e){var t=e.user,a=e.clearUser,n=e.msgAlert,s=Object(r.useState)(!1),c=Object(i.a)(s,2),l=c[0],u=c[1];return Object(r.useEffect)((function(){var e=function(){var e=Object(f.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(t);case 2:n({heading:"Sign Out Success",message:"Come back soon!",variant:"success"}),a(),u(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),!t||l?Object(j.jsx)(o.a,{to:"/"}):""},D=function(e){var t=e.user,a=e.msgAlert,n=Object(r.useState)(""),s=Object(i.a)(n,2),c=s[0],l=s[1],u=Object(r.useState)(""),d=Object(i.a)(u,2),b=d[0],h=d[1],m=Object(r.useState)(!1),O=Object(i.a)(m,2),p=O[0],x=O[1],g=function(){var e=Object(f.a)(w.a.mark((function e(r){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,e.next=4,E(c,b,t);case 4:a({heading:"Change Password Success",message:"Password changed successfully!",variant:"success"}),x(!0),e.next=14;break;case 8:e.prev=8,e.t0=e.catch(1),a({heading:"Change Password Failed with error: "+e.t0.message,message:"Failed to change passwords. Check your old password and try again.",variant:"danger"}),console.error(e.t0),l(""),h("");case 14:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return p?Object(j.jsx)(o.a,{to:"/"}):Object(j.jsx)("div",{className:"row",children:Object(j.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(j.jsx)("h3",{children:"Sign In"}),Object(j.jsxs)(I.a,{onSubmit:g,children:[Object(j.jsxs)(I.a.Group,{className:"mb-3",controlId:"email",children:[Object(j.jsx)(I.a.Label,{children:"Old Password"}),Object(j.jsx)(I.a.Control,{type:"password",placeholder:"Old Password",required:!0,value:c,onChange:function(e){return l(e.target.value)}})]}),Object(j.jsxs)(I.a.Group,{className:"mb-3",controlId:"password",children:[Object(j.jsx)(I.a.Label,{children:"New Password"}),Object(j.jsx)(I.a.Control,{required:!0,value:b,type:"password",placeholder:"New Password",onChange:function(e){return h(e.target.value)}})]}),Object(j.jsx)(G.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})},M=function(e,t){return N.a.get("".concat(k,"/profiles/").concat(t),{headers:{Authorization:"Bearer ".concat(e.token)}})},T=function(e,t,a){return N.a.post("".concat(k,"/profiles/"),{profile:{name:t,about:a}},{headers:{Authorization:"Bearer ".concat(e.token)}})},B=function(e,t,a,r){return N.a.patch("".concat(k,"/profiles/").concat(t),{profile:{name:a,about:r}},{headers:{Authorization:"Bearer ".concat(e.token)}})},z=function(e,t){return N.a.delete("".concat(k,"/profiles/").concat(t),{headers:{Authorization:"Bearer ".concat(e.token)}})},H=a(128),R=function(e){var t=e.user,a=e.msgAlert,n=Object(r.useState)(null),s=Object(i.a)(n,2),c=s[0],l=s[1],u=Object(r.useState)(!1),d=Object(i.a)(u,2),b=d[0],h=d[1],O=Object(o.h)().id;if(!t)return Object(j.jsx)(o.a,{to:"/"});Object(r.useEffect)((function(){var e=function(){var e=Object(f.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M(t,O).then((function(e){return l(e.data.profile)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),a({heading:"Finding Profile failed with error: ",message:"Uh oh. We couldn't find the profile you were looking for",variant:"danger"});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var p=function(){var e=Object(f.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z(t,O).then(delete t.profile,h(!0),a({heading:"Profile Deleted Successfully",message:"Profile successfully deleted. Sad to see you go!",variant:"success"}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),a({heading:"Delete Profile failed with error: ",message:e.t0.message,variant:"danger"});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return b?Object(j.jsx)(o.a,{to:"/"}):null===c?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h4",{children:"Fetching Profile"}),Object(j.jsx)(H.a,{animation:"border",role:"status",children:Object(j.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),Object(j.jsx)(G.a,{onClick:function(){return h(!0)},variant:"primary",type:"button",children:"Return Home"})]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{children:c.name}),Object(j.jsx)("h4",{children:"About Me:"}),Object(j.jsx)("p",{children:c.about}),Object(j.jsx)(G.a,{onClick:p,variant:"danger",type:"button",children:"Delete Profile"}),Object(j.jsx)(m.b,{to:"/profiles/".concat(O,"/edit"),children:Object(j.jsx)(G.a,{variant:"primary",type:"submit",children:"Edit Profile"})})]})},W=function(e){var t=e.user,a=(e.setUser,e.msgAlert),n=Object(r.useState)(""),s=Object(i.a)(n,2),c=s[0],l=s[1],u=Object(r.useState)(""),d=Object(i.a)(u,2),b=d[0],h=d[1],m=Object(r.useState)(!1),O=Object(i.a)(m,2),p=O[0],x=O[1],g=function(){var e=Object(f.a)(w.a.mark((function e(r){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,e.next=4,T(t,c,b).then((function(e){t.profile=e.data.profile}));case 4:a({heading:"Profile Creation Success",message:"Profile created successfully! Get busy chatting!",variant:"success"}),x(!0),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),a({heading:"Profile Creation failed with error: "+e.t0.message,message:"Failed to create a profile. Please check your inputs and try again.",variant:"danger"}),l(""),h("");case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return p?Object(j.jsx)(o.a,{to:"/"}):Object(j.jsx)("div",{className:"row",children:Object(j.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(j.jsx)("h3",{children:"Create Your Profile"}),Object(j.jsxs)(I.a,{onSubmit:g,children:[Object(j.jsxs)(I.a.Group,{className:"mb-3",controlId:"name",children:[Object(j.jsx)(I.a.Label,{children:"Name"}),Object(j.jsx)(I.a.Control,{type:"name",placeholder:"Profile Name",required:!0,value:c,onChange:function(e){return l(e.target.value)}})]}),Object(j.jsxs)(I.a.Group,{className:"mb-3",controlId:"aboutMe",children:[Object(j.jsx)(I.a.Label,{children:"About Me"}),Object(j.jsx)(I.a.Control,{required:!0,value:b,type:"aboutMe",placeholder:"Tell us a bit about yourself",onChange:function(e){return h(e.target.value)}})]}),Object(j.jsx)(G.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})},Y=function(e){var t=e.user,a=e.msgAlert,n=Object(r.useState)(""),s=Object(i.a)(n,2),c=s[0],l=s[1],u=Object(r.useState)(""),d=Object(i.a)(u,2),b=d[0],h=d[1],m=Object(r.useState)(!1),O=Object(i.a)(m,2),p=O[0],x=O[1],g=Object(o.h)().id,v=function(){var e=Object(f.a)(w.a.mark((function e(r){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,e.next=4,B(t,g,c,b);case 4:a({heading:"Profile Edit Success",message:"Profile successfully updated! Get busy chatting!",variant:"success"}),x(!0),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),a({heading:"Profile Edit failed with error: "+e.t0.message,message:"Failed to update your profile. Please check inputs and try again.",variant:"danger"}),l(""),h("");case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return p?Object(j.jsx)(o.a,{to:"/profiles/".concat(g)}):Object(j.jsx)("div",{className:"row",children:Object(j.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(j.jsx)("h3",{children:"Edit Your Profile"}),Object(j.jsxs)(I.a,{onSubmit:v,children:[Object(j.jsxs)(I.a.Group,{className:"mb-3",controlId:"name",children:[Object(j.jsx)(I.a.Label,{children:"Name"}),Object(j.jsx)(I.a.Control,{type:"name",placeholder:"Profile Name",required:!0,value:c,onChange:function(e){return l(e.target.value)}})]}),Object(j.jsxs)(I.a.Group,{className:"mb-3",controlId:"aboutMe",children:[Object(j.jsx)(I.a.Label,{children:"About Me"}),Object(j.jsx)(I.a.Control,{required:!0,value:b,type:"aboutMe",placeholder:"Tell us a bit about yourself",onChange:function(e){return h(e.target.value)}})]}),Object(j.jsx)(G.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})},J=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h1",{children:"This is where a Home Page will go"}),Object(j.jsx)("h4",{children:"Maybe like a cool picture or something"})]})},_=a(9),K=a(2),Q=a(85),V=Object(Q.a)("http://localhost:4741",{withCredentials:!0}),X=function(e){var t=e.user,a=Object(r.useState)([]),n=Object(i.a)(a,2),s=n[0],o=n[1],l=Object(r.useState)({message:"",name:t.profile.name}),u=Object(i.a)(l,2),d=u[0],b=u[1];Object(r.useEffect)((function(){V.on("message",(function(e){var t=e.name,a=e.message;o([].concat(Object(c.a)(s),[{name:t,message:a}]))}))}));return Object(j.jsx)("div",{className:"row",children:Object(j.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(j.jsx)("ul",{children:s.map((function(e,t){var a=e.name,r=e.message;return Object(j.jsx)("div",{children:Object(j.jsxs)("h3",{children:[a,": ",Object(j.jsx)("span",{children:r})]})},t)}))}),Object(j.jsxs)(I.a,{onSubmit:function(e){e.preventDefault();var t=d.name,a=d.message;V.emit("message",{name:t,message:a}),b({message:"",name:t})},children:[Object(j.jsxs)(I.a.Group,{controlId:"message",children:[Object(j.jsx)(I.a.Label,{children:"Message"}),Object(j.jsx)(I.a.Control,{required:!0,type:"text",name:"message",value:d.message,placeholder:"Enter message",onChange:function(e){return t=e,b(Object(K.a)(Object(K.a)({},d),{},Object(_.a)({},t.target.name,t.target.value))),void console.log("name ",t.target.name,"  val ",t.target.value);var t}})]}),Object(j.jsx)(G.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})},Z=function(){var e=Object(r.useState)(null),t=Object(i.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)([]),u=Object(i.a)(s,2),b=u[0],h=u[1];console.log(h);var m=function(e){var t=e.heading,a=e.message,r=e.variant,n=Object(l.a)();console.log(n),h((function(e){return[].concat(Object(c.a)(e),[{heading:t,message:a,variant:r,id:n}])}))};return Object(j.jsxs)(j.Fragment,{children:[b.map((function(e){return Object(j.jsx)(d,{heading:e.heading,variant:e.variant,message:e.message},e.id)})),Object(j.jsx)(g,{user:a}),Object(j.jsx)("main",{className:"container",children:Object(j.jsxs)(o.d,{children:[Object(j.jsx)(o.b,{path:"/",element:Object(j.jsx)(J,{})}),Object(j.jsx)(o.b,{path:"/sign-up",element:Object(j.jsx)(L,{setUser:n,msgAlert:m})}),Object(j.jsx)(o.b,{path:"/sign-in",element:Object(j.jsx)(U,{setUser:n,msgAlert:m})}),Object(j.jsx)(o.b,{path:"/change-password",element:Object(j.jsx)(D,{user:a,msgAlert:m})}),Object(j.jsx)(o.b,{path:"/sign-out/",element:Object(j.jsx)(q,{user:a,clearUser:function(){return n(null)},msgAlert:m})}),Object(j.jsx)(o.b,{path:"/profiles/:id",element:Object(j.jsx)(R,{user:a,msgAlert:m})}),Object(j.jsx)(o.b,{path:"/profiles/:id/edit",element:Object(j.jsx)(Y,{user:a,msgAlert:m})}),Object(j.jsx)(o.b,{path:"/profiles/create",element:Object(j.jsx)(W,{user:a,setUser:n,msgAlert:m})}),Object(j.jsx)(o.b,{path:"/chat",element:Object(j.jsx)(X,{user:a})})]})})]})},$=Object(j.jsxs)(m.a,{basename:"/project-front",children:[Object(j.jsx)("script",{src:"/socket.io/socket.io.js"}),Object(j.jsx)("script",{children:"var socket = io();"}),Object(j.jsx)(Z,{})]});s.a.render($,document.getElementById("root"))},93:function(e,t,a){},94:function(e,t,a){}},[[124,1,2]]]);
//# sourceMappingURL=main.5781486f.chunk.js.map